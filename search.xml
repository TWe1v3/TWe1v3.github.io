<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>SQL-增删改查</title>
    <url>/2022/09/02/SQL-%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/</url>
    <content><![CDATA[<p>Do u know Create and Drop Database, Create, Alter and Drop Tables, Select, Insert, Update, Delete Commands.</p>
<span id="more"></span>
<h2 id="introduction-descriptive"><a class="markdownIt-Anchor" href="#introduction-descriptive"></a> Introduction (Descriptive)</h2>
<p>Content:- Creating and Maintaining Tables, Objectives, The CREATE DATABASE Statement, CREATE DATABASE Options, Database Design, Creating a Data Dictionary, Creating Key Fields, The CREATE TABLE Statement, The Table Name, The Field Name, The Field’s Data Type, The NULL Value, Table Storage and Sizing, Creating a Table from an Existing Table, The ALTER TABLE Statement, The DROP TABLE Statement, The DROP DATABASE Statement.</p>
<h2 id="details"><a class="markdownIt-Anchor" href="#details"></a> Details</h2>
<p>It covers the <strong>CREATE DATABASE</strong>, <strong>CREATE TABLE</strong>, <strong>ALTER TABLE</strong>, <strong>DROP TABLE</strong>, and <strong>DROP DATABASE</strong> statements, which are collectively known as data definition statements. (In contrast, the <strong>SELECT</strong>, <strong>UPDATE</strong>, <strong>INSERT</strong>, and <strong>DELETE</strong> statements are often described as data manipulation statements.) By the end, you will understand and be able to do the following:</p>
<ul>
<li>Create key fields</li>
<li>Create a database with its associated tables</li>
<li>Create, alter, and drop a table</li>
<li>Add data to the database</li>
<li>Modify the data in a database</li>
<li>Drop databases</li>
</ul>
<p>The syntax of the <strong>CREATE</strong> statements can range from the extremely simple to the complex, depending on the options your database management system (DBMS) supports and how detailed you want to be when building a database.</p>
<p><strong>NOTE:</strong> The examples used today were generated using Personal Oracle7. Please see the documentation for your specific SQL implementation for any minor differences in syntax.</p>
<h2 id="the-create-database-statement"><a class="markdownIt-Anchor" href="#the-create-database-statement"></a> <strong>The CREATE DATABASE Statement</strong></h2>
<p>The first data management step in any database project is to create the database. This task can range from the elementary to the complicated, depending on your needs and the database management system you have chosen. Many modern systems (including Personal Oracle7) include graphical tools that enable you to completely build the database with the click of a mouse button. This time-saving feature is certainly helpful, but you should understand the SQL statements that execute in response to the mouse clicks.</p>
<p>Through personal experience, we have learned the importance of creating a good SQL install script. This script file contains the necessary SQL code to completely rebuild a database or databases; the script often includes database objects such as indexes, stored procedures, and triggers. You will see the value of this script during development as you continually make changes to the underlying database and on occasion want to completely rebuild the database with all the latest changes. Using the graphical tools each time you need to perform a rebuild can become extremely time-consuming. In addition, knowing the SQL syntax for this procedure enables you to apply your knowledge to other database systems.</p>
<p>The syntax for the typical <strong>CREATE DATABASE</strong> statement looks like this:</p>
<p><strong>SYNTAX:</strong></p>
<p>CREATE DATABASE database_name</p>
<p>Because the syntax varies so widely from system to system, we will not expand on the <strong>CREATE DATABASE</strong> statement’s syntax. Many systems do not even support an SQL <strong>CREATE DATABASE</strong> command. However, all the popular, more powerful, relational database management systems (RDBMSs) do provide it. Instead of focusing on its syntax, we will spend some time discussing the options to consider when creating a database.</p>
<h2 id="create-database-options"><a class="markdownIt-Anchor" href="#create-database-options"></a> <strong>CREATE DATABASE Options</strong></h2>
<p>The syntax for the <strong>CREATE DATABASE</strong> statement can vary widely. Many SQL texts skip over the <strong>CREATE DATABASE</strong> statement and move directly on to the <strong>CREATE TABLE</strong> statement. Because you must create a database before you can build a table, this section focuses on some of the concepts a developer must consider when building a database. The first consideration is your level of permission. If you are using a relational database management system (RDBMS) that supports user permissions, you must make sure that either you have system administrator-level permission settings or the system administrator has granted you <strong>CREATE DATABASE</strong> permission. Refer to your RDBMS documentation for more information.</p>
<p>Most RDBMSs also allow you to specify a default database size, usually in terms of hard disk space (such as megabytes). You will need to understand how your database system stores and locates data on the disk to accurately estimate the size you need. The responsibility for managing this space falls primarily to system administrators, and possibly at your location a database administrator will build you a test database.</p>
<p>Don’t let the <strong>CREATE DATABASE</strong> statement intimidate you. At its simplest, you can create a database named <strong>PAYMENTS</strong> with the following statement:</p>
<p><strong>SYNTAX:</strong></p>
<p>SQL&gt; <strong>CREATE DATABASE PAYMENTS;</strong></p>
<p><strong>NOTE:</strong> Again, be sure to consult your database management system’s documentation to learn the specifics of building a database, as the <strong>CREATE DATABASE</strong> statement can and does vary for the different implementations. Each implementation also has some unique options.</p>
<p><strong>Database Design</strong></p>
<p><em>Normalization</em> is the process of breaking your data into separate components to reduce the repetition of data. Each level of normalization reduces the repetition of data. Normalizing your data can be an extremely complex process, and numerous database design tools enable you to plan this process in a logical fashion. Many factors can influence the design of your database, including the following:</p>
<p><strong>Security</strong></p>
<ul>
<li>Disk space available</li>
<li>Speed of database searches and retrievals</li>
<li>Speed of database updates</li>
<li>Speed of multiple-table joins to retrieve data</li>
<li>RDBMS support for temporary tables</li>
</ul>
<p>Disk space is always an important factor. Although you may not think that disk space is a major concern in an age of multigigabyte storage, remember that the bigger your database is, the longer it takes to retrieve records. If you have done a poor job of designing your table structure, chances are that you have needlessly repeated much of your data.</p>
<p>Often the opposite problem can occur. You may have sought to completely normalize your tables’ design with the database and in doing so created many tables. Although you may have approached database-design nirvana, any query operations done against this database may take a very long time to execute. Databases designed in this manner are sometimes difficult to maintain because the table structure might obscure the designer’s intent. This problem underlines the importance of always documenting your code or design so that others can come in after you (or work with you) and have some idea of what you were thinking at the time you created your database structure. In database designer’s terms, this documentation is known as a data dictionary.</p>
<h2 id="creating-a-data-dictionary"><a class="markdownIt-Anchor" href="#creating-a-data-dictionary"></a> <strong>Creating a Data Dictionary</strong></h2>
<p>A data dictionary is the database designer’s most important form of documentation. It performs the following functions:</p>
<ul>
<li>Describes the purpose of the database and who will be using it.</li>
<li>Documents the specifics behind the database itself: what device it was created on, the database’s default size, or the size of the log file (used to store database operations information in some RDBMSs).</li>
<li>Contains SQL source code for any database install or uninstall scripts, including documentation on the use of import/export tools.</li>
<li>Provides a detailed description of each table within the database and explains its purpose in business process terminology.</li>
<li>Documents the internal structure of each table, including all fields and their data types with comments, all indexes, and all views.</li>
<li>Contains SQL source code for all stored procedures and triggers.</li>
<li>Describes database constraints such as the use of unique values or <strong>NOT NULL</strong> values. The documentation should also mention whether these constraints are enforced at the RDBMS level or whether the database programmer is expected to check for these constraints within the source code.</li>
</ul>
<p>Many computer-aided software engineering (CASE) tools aid the database designer in the creation of this data dictionary. For instance, Microsoft Access comes prepackaged with a database documenting tool that prints out a detailed description of every object in the database.</p>
<p><strong>NOTE:</strong> Most of the major RDBMS packages come with either the data dictionary installed or scripts to install it.</p>
<h2 id="creating-key-fields"><a class="markdownIt-Anchor" href="#creating-key-fields"></a> <strong>Creating Key Fields</strong></h2>
<p>Along with documenting your database design, the most important design goal you should have is to create your table structure so that each table has a primary key and a foreign key. The primary key should meet the following goals:</p>
<ul>
<li>Each record is unique within a table (no other record within the table has all of its columns equal to any other).</li>
<li>For a record to be unique, all the columns are necessary; that is, data in one column should not be repeated anywhere else in the table.</li>
</ul>
<p>Regarding the second goal, the column that has completely unique data throughout the table is known as the <em>primary key field</em>. A <em>foreign key field</em> is a field that links one table to another table’s primary or foreign key. The following example should clarify this situation.</p>
<p>Assume you have three tables: <strong>BILLS</strong>, <strong>BANK_ACCOUNTS</strong>, and <strong>COMPANY</strong>. Table 9.1 shows the format of these three tables.</p>
<p><strong>Table 9.1. Table structure for the PAYMENTS database.</strong></p>
<p><img src="https://img-blog.csdnimg.cn/54613e7278674249b4a08a642a66837b.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>Take a moment to examine these tables. Which fields do you think are the primary keys? Which are the foreign keys?</p>
<p>The primary key in the <strong>BILLS</strong> table is the <strong>NAME</strong> field. This field should not be duplicated because you have only one bill with this amount. (In reality, you would probably have a check number or a date to make this record truly unique, but assume for now that the <strong>NAME</strong> field works.) The <strong>ACCOUNT_ID</strong> field in the <strong>BANK_ACCOUNTS</strong> table is the primary key for that table. The <strong>NAME</strong> field is the primary key for the <strong>COMPANY</strong> table.</p>
<p>The foreign keys in this example are probably easy to spot. The <strong>ACCOUNT_ID</strong> field in the <strong>BILLS</strong> table joins the <strong>BILLS</strong> table with the <strong>BANK_ACCOUNTS</strong> table. The <strong>NAME</strong> field in the <strong>BILLS</strong> table joins the <strong>BILLS</strong> table with the <strong>COMPANY</strong> table. If this were a full-fledged database design, you would have many more tables and data breakdowns. For instance, the <strong>BANK</strong> field in the <strong>BANK_ACCOUNTS</strong> table could point to a <strong>BANK</strong> table containing bank information such as addresses and phone numbers. The <strong>COMPANY</strong> table could be linked with another table (or database for that matter) containing information about the company and its products.</p>
<p><strong>Exercise 9.1</strong></p>
<p>Let’s take a moment to examine an incorrect database design using the same information contained in the <strong>BILLS</strong>, <strong>BANK_ACCOUNTS</strong>, and <strong>COMPANY</strong> tables. A mistake many beginning users make is not breaking down their data into as many logical groups as possible. For instance, one poorly designed <strong>BILLS</strong> table might look like this:</p>
<p><img src="https://img-blog.csdnimg.cn/75dd3c28420b4db7af3b8291bcf7bb97.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="https://img-blog.csdnimg.cn/7047a6fada8f4a6ba3ea2083f2961ea8.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>The results may look correct, but take a moment to really look at the data here. If over several months you wrote several bills to the company in the <strong>NAME</strong> field, each time a new record was added for a bill, the company’s <strong>ADDRESS</strong>, <strong>CITY</strong>, and <strong>STATE</strong> information would be duplicated. Now multiply that duplication over several hundred or thousand records and then multiply that figure by 10, 20, or 30 tables. You can begin to see the importance of a properly normalized database.</p>
<p>Before you actually fill these tables with data, you will need to know how to create a table.</p>
<h2 id="the-create-table-statement"><a class="markdownIt-Anchor" href="#the-create-table-statement"></a> <strong>The CREATE TABLE Statement</strong></h2>
<p>The process of creating a table is far more standardized than the <strong>CREATE DATABASE</strong> statement. Here’s the basic syntax for the <strong>CREATE TABLE</strong> statement:</p>
<p><strong>SYNTAX:</strong></p>
<p>CREATE TABLE table_name</p>
<p>( field1 datatype [ NOT NULL ],</p>
<p>field2 datatype [ NOT NULL ],</p>
<p>field3 datatype [ NOT NULL ]…)</p>
<p>A simple example of a <strong>CREATE TABLE</strong> statement follows</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>CREATE TABLE BILLS (</strong></p>
<p>2 <strong>NAME CHAR(30),</strong></p>
<p>3 <strong>AMOUNT NUMBER,</strong></p>
<p>4 <strong>ACCOUNT_ID NUMBER);</strong></p>
<p>Table created.</p>
<p><strong>ANALYSIS:</strong></p>
<p>This statement creates a table named <strong>BILLS</strong>. Within the <strong>BILLS</strong> table are three fields: <strong>NAME</strong>, <strong>AMOUNT</strong>, and <strong>ACCOUNT_ID</strong>. The <strong>NAME</strong> field has a data type of character and can store strings up to 30 characters long. The <strong>AMOUNT</strong> and <strong>ACCOUNT_ID</strong> fields can contain number values only.</p>
<p>The following section examines components of the <strong>CREATE TABLE</strong> command.</p>
<h3 id="the-table-name"><a class="markdownIt-Anchor" href="#the-table-name"></a> <strong>The Table Name</strong></h3>
<p>When creating a table using Personal Oracle7, several constraints apply when naming the table. First, the table name can be no more than 30 characters long. Because Oracle is case insensitive, you can use either uppercase or lowercase for the individual characters. However, the first character of the name must be a letter between <strong>A</strong> and <strong>Z</strong>. The remaining characters can be letters or the symbols <strong>_</strong>, <strong>#</strong>, <strong>$</strong>, and <strong>@</strong>. Of course, the table name must be unique within its schema. The name also cannot be one of the Oracle or SQL reserved words (such as <strong>SELECT</strong>).</p>
<p><strong>NOTE:</strong> You can have duplicate table names as long as the owner or schema is different. Table names in the same schema must be unique.</p>
<h3 id="the-field-name"><a class="markdownIt-Anchor" href="#the-field-name"></a> <strong>The Field Name</strong></h3>
<p>The same constraints that apply to the table name also apply to the field name. However, a field name can be duplicated within the database. The restriction is that the field name must be unique within its table. For instance, assume that you have two tables in your database: <strong>TABLE1</strong>and <strong>TABLE2</strong>. Both of these tables could have fields called ID. You cannot, however, have two fields within <strong>TABLE1</strong> called <strong>ID</strong>, even if they are of different data types.</p>
<h3 id="the-fields-data-type"><a class="markdownIt-Anchor" href="#the-fields-data-type"></a> <strong>The Field’s Data Type</strong></h3>
<p>If you have ever programmed in any language, you are familiar with the concept of data types, or the type of data that is to be stored in a specific field. For instance, a character data type constitutes a field that stores only character string data. Table 9.2 shows the data types supported by Personal Oracle7.</p>
<p><strong>Table 9.2. Data types supported by Personal Oracle7.</strong></p>
<p><img src="https://img-blog.csdnimg.cn/96c27bf2f8294ddd95fdbb552a7c9071.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="https://img-blog.csdnimg.cn/97d769dab67f44fba0b88e7a2f110dd1.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>NOTE:</strong> The <strong>LONG</strong> data type is often called a <strong>MEMO</strong> data type in other database management systems. It is primarily used to store large amounts of text for retrieval at some later time.</p>
<p>The <strong>LONG RAW</strong> data type is often called a binary large object (<strong>BLOB</strong>) in other database management systems. It is typically used to store graphics, sound, or video data. Although relational database management systems were not originally designed to serve this type of data, many multimedia systems today store their data in <strong>LONG RAW</strong>, or <strong>BLOB</strong>, fields.</p>
<p>The <strong>ROWID</strong> field type is used to give each record within your table a unique, no duplicating value. Many other database systems support this concept with a <strong>COUNTER</strong> field (Microsoft Access) or an <strong>IDENTITY</strong> field (SQL Server).</p>
<p><strong>NOTE:</strong> Check your implementation for supported data types as they may vary.</p>
<h3 id="the-null-value"><a class="markdownIt-Anchor" href="#the-null-value"></a> <strong>The NULL Value</strong></h3>
<p>SQL also enables you to identify what can be stored within a column. A <strong>NULL</strong> value is almost an oxymoron, because having a field with a value of <strong>NULL</strong> means that the field actually has no value stored in it.</p>
<p>When building a table, most database systems enable you to denote a column with the <strong>NOT NULL</strong> keywords. <strong>NOT NULL</strong> means the column cannot contain any <strong>NULL</strong> values for any records in the table. Conversely, <strong>NOT NULL</strong> means that every record must have an actual value in this column. The following example illustrates the use of the <strong>NOT NULL</strong> keywords.</p>
<p><strong>INPUT:</strong></p>
<p>SQL&gt; <strong>CREATE TABLE BILLS (</strong></p>
<p>2 <strong>NAME CHAR(30) NOT NULL,</strong></p>
<p>3 <strong>AMOUNT NUMBER,</strong></p>
<p>4 <strong>ACCOUNT_ID NOT NULL);</strong></p>
<p><strong>ANALYSIS:</strong></p>
<p>In this table you want to save the name of the company you owe the money to, along with the bill’s amount. If the <strong>NAME</strong> field and/or the <strong>ACCOUNT_ID</strong> were not stored, the record would be meaningless. You would end up with a record with a bill, but you would have no idea whom you should pay.</p>
<p>The first statement in the next example inserts a valid record containing data for a bill to be sent to Joe’s Computer Service for $25.</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>INSERT INTO BILLS VALUES(“Joe’s Computer Service”, 25, 1);</strong></p>
<p>1 row inserted.</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>INSERT INTO BILLS VALUES(“”, 25000, 1);</strong></p>
<p>1 row inserted.</p>
<p><strong>ANALYSIS:</strong></p>
<p>Notice that the second record in the preceding example does not contain a <strong>NAME</strong> value. (You might think that a missing payee is to your advantage because the bill amount is $25,000, but we won’t consider that.) If the table had been created with a <strong>NOT NULL</strong> value for the <strong>NAME</strong> field, the second insert would have raised an error.</p>
<p>A good rule of thumb is that the primary key field and all foreign key fields should never contain <strong>NULL</strong> values.</p>
<p><strong>Unique Fields</strong></p>
<p>One of your design goals should be to have one unique column within each table. This column or field is a primary key field. Some database management systems allow you to set a field as unique. Other database management systems, such as Oracle and SQL Server, allow you to create a unique index on a field. This feature keeps you from inserting duplicate key field values into the database.</p>
<p>You should notice several things when choosing a key field. As we mentioned, Oracle provides a <strong>ROWID</strong> field that is incremented for each row that is added, which makes this field by default always a unique key. <strong>ROWID</strong> fields make excellent key fields for several reasons. First, it is much faster to join on an integer value than on an 80- character string. Such joins result in smaller database sizes over time if you store an integer value in every primary and foreign key as opposed to a long <strong>CHAR</strong> value. Another advantage is that you can use <strong>ROWID</strong> fields to see how a table is organized. Also, using <strong>CHAR</strong> values leaves you open to a number of data entry problems. For instance, what would happen if one person entered <strong>111 First Street</strong>, another entered <strong>111 1st Street</strong>, and yet another entered <strong>111 First St.</strong>? With today’s graphical user environments, the correct string could be entered into a list box. When a user makes a selection from the list box, the code would convert this string to a unique ID and save this ID to the database.</p>
<p>Now you can create the tables you used earlier today. You will use these tables for the rest of today, so you will want to fill them with some data. Use the <strong>INSERT</strong> command covered yesterday to load the tables with the data in Tables 9.3, 9.4, and 9.5.</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>create database PAYMENTS;</strong></p>
<p>Statement processed.</p>
<p>SQL&gt; <strong>create table BILLS (</strong></p>
<p>2 <strong>NAME CHAR(30) NOT NULL,</strong></p>
<p>3 <strong>AMOUNT NUMBER,</strong></p>
<p>4 <strong>ACCOUNT_ID NUMBER NOT NULL);</strong></p>
<p>Table created.</p>
<p>SQL&gt; <strong>create table BANK_ACCOUNTS (</strong></p>
<p>2 <strong>ACCOUNT_ID NUMBER NOT NULL,</strong></p>
<p>3 <strong>TYPE CHAR(30),</strong></p>
<p>4 <strong>BALANCE NUMBER,</strong></p>
<p>5 <strong>BANK CHAR(30));</strong></p>
<p>Table created.</p>
<p>SQL&gt; <strong>create table COMPANY (</strong></p>
<p>2 <strong>NAME CHAR(30) NOT NULL,</strong></p>
<p>3 <strong>ADDRESS CHAR(50),</strong></p>
<p>4 <strong>CITY CHAR(30),</strong></p>
<p>5 <strong>STATE CHAR(2));</strong></p>
<p>Table created.</p>
<p><strong>Table 9.3. Sample data for the BILLS table.</strong></p>
<p><img src="https://img-blog.csdnimg.cn/0d2c47a1014d4410b1914a93640728cc.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>Table 9.4. Sample data for the BANK_ACCOUNTS table.</strong></p>
<p><img src="https://img-blog.csdnimg.cn/0e80211dce534627935aeb2437501c74.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>Table 9.5. Sample data for the COMPANY table.</strong></p>
<p><img src="https://img-blog.csdnimg.cn/458ba3ffdf17401ba0fed78e6c46207f.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>Table Storage and Sizing</strong></p>
<p>Most major RDBMSs have default settings for table sizes and table locations. If you do not specify table size and location, then the table will take the defaults. The defaults may be very undesirable, especially for large tables. The default sizes and locations will vary among the implementations. Here is an example of a <strong>CREATE TABLE</strong> statement with a storage clause (from Oracle).</p>
<p><strong>INPUT:</strong></p>
<p>SQL&gt; <strong>CREATE TABLE TABLENAME</strong></p>
<p>2 <strong>(COLUMN1 CHAR NOT NULL,</strong></p>
<p>3 <strong>COLUMN2 NUMBER,</strong></p>
<p>4 <strong>COLUMN3 DATE)</strong></p>
<p>5 <strong>TABLESPACE TABLESPACE NAME</strong></p>
<p>6 <strong>STORAGE</strong></p>
<p>7 <strong>INITIAL SIZE,</strong></p>
<p>8 <strong>NEXT SIZE,</strong></p>
<p>9 <strong>MINEXTENTS value,</strong></p>
<p>10 <strong>MAXEXTENTS value,</strong></p>
<p>11 <strong>PCTINCREASE value);</strong></p>
<p><strong>OUTPUT:</strong></p>
<p>Table created.</p>
<p><strong>ANALYSIS:</strong></p>
<p>In Oracle you can specify a tablespace in which you want the table to reside. A decision is usually made according to the space available, often by the database administrator (DBA). <strong>INITIAL SIZE</strong> is the size for the initial extent of the table (the initial allocated space). <strong>NEXT SIZE</strong> is the value for any additional extents the table may take through growth. <strong>MINEXTENTS</strong> and <strong>MAXEXTENTS</strong> identify the minimum and maximum extents allowed for the table, and <strong>PCTINCREASE</strong> identifies the percentage the next extent will be increased each time the table grows, or takes another extent.</p>
<p><strong>Creating a Table from an Existing Table</strong></p>
<p>The most common way to create a table is with the <strong>CREATE TABLE</strong> command. However, some database management systems provide an alternative method of creating tables, using the format and data of an existing table. This method is useful when you want to select the data out of a table for temporary modification. It can also be useful when you have to create a table similar to the existing table and fill it with similar data. (You won’t have to reenter all this information.) The syntax for Oracle follows.</p>
<p><strong>SYNTAX:</strong></p>
<p>CREATE TABLE NEW_TABLE(FIELD1, FIELD2, FIELD3)</p>
<p>AS (SELECT FIELD1, FIELD2, FIELD3</p>
<p>FROM OLD_TABLE &lt;WHERE…&gt;</p>
<p>This syntax allows you to create a new table with the same data types as those of the fields that are selected from the old table. It also allows you to rename the fields in the new table by giving them new names.</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>CREATE TABLE NEW_BILLS(NAME, AMOUNT, ACCOUNT_ID)</strong></p>
<p>2 <strong>AS (SELECT * FROM BILLS WHERE AMOUNT &lt; 50);</strong></p>
<p>Table created.</p>
<p><strong>ANALYSIS:</strong></p>
<p>The preceding statement creates a new table (<strong>NEW_BILLS</strong>) with all the records from the <strong>BILLS</strong> table that have an <strong>AMOUNT</strong> less than <strong>50</strong>.</p>
<p>Some database systems also allow you to use the following syntax:</p>
<p><strong>SYNTAX:</strong></p>
<p>INSERT NEW_TABLE</p>
<p>SELECT &lt;field1, field2… | *&gt; from OLD_TABLE</p>
<p>&lt;WHERE…&gt;</p>
<p>The preceding syntax would create a new table with the exact field structure and data found in the old table. Using SQL Server’s Transact-SQL language in the following example illustrates this technique.</p>
<p><strong>INPUT:</strong></p>
<p><strong>INSERT NEW_BILLS</strong></p>
<p>1&gt; <strong>select * from BILLS where AMOUNT &lt; 50</strong></p>
<p>2&gt; <strong>go</strong></p>
<p>(The <strong>GO</strong> statement in SQL Server processes the SQL statements in the command buffer. It is equivalent to the semicolon (<strong>;</strong>) used in Oracle7.)</p>
<p><strong>The ALTER TABLE Statement</strong></p>
<p>Many times your database design does not account for everything it should. Also, requirements for applications and databases are always subject to change. The <strong>ALTER TABLE</strong> statement enables the database administrator or designer to change the structure of a table after it has been created.</p>
<p>The <strong>ALTER TABLE</strong> command enables you to do two things:</p>
<ul>
<li>Add a column to an existing table</li>
<li>Modify a column that already exists</li>
</ul>
<p>The syntax for the <strong>ALTER TABLE</strong> statement is as follows:</p>
<p><strong>SYNTAX:</strong></p>
<p>ALTER TABLE table_name</p>
<p>&lt;ADD column_name data_type; |</p>
<p>MODIFY column_name data_type;&gt;</p>
<p>The following command changes the <strong>NAME</strong> field of the <strong>BILLS</strong> table to hold 40</p>
<p>characters:</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>ALTER TABLE BILLS</strong></p>
<p>2 <strong>MODIFY NAME CHAR(40);</strong></p>
<p>Table altered.</p>
<p><strong>NOTE:</strong> You can increase or decrease the length of columns; however, you can not decrease a column’s length if the current size of one of its values is greater than the value you want to assign to the column length.</p>
<p>Here’s a statement to add a new column to the <strong>NEW_BILLS</strong> table:</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>ALTER TABLE NEW_BILLS</strong></p>
<p>2 <strong>ADD COMMENTS CHAR(80);</strong></p>
<p>Table altered.</p>
<p><strong>ANALYSIS:</strong></p>
<p>This statement would add a new column named <strong>COMMENTS</strong> capable of holding 80 characters. The field would be added to the right of all the existing fields.</p>
<p>Several restrictions apply to using the <strong>ALTER TABLE</strong> statement. You cannot use it to add or delete fields from a database. It can change a column from <strong>NOT NULL</strong> to <strong>NULL</strong>, but not necessarily the other way around. A column specification can be changed from <strong>NULL</strong> to <strong>NOT NULL</strong> only if the column does not contain any <strong>NULL</strong> values. To change a column from <strong>NOT NULL</strong> to <strong>NULL</strong>, use the following syntax:</p>
<p><strong>SYNTAX:</strong></p>
<p>ALTER TABLE table_name MODIFY (column_name data_type NULL);</p>
<p>To change a column from <strong>NULL</strong> to <strong>NOT NULL</strong>, you might have to take several steps:</p>
<p><strong>1.</strong> Determine whether the column has any <strong>NULL</strong> values.</p>
<p><strong>2.</strong> Deal with any <strong>NULL</strong> values that you find. (Delete those records; update the column’s value, and so on.)</p>
<p><strong>3.</strong> Issue the <strong>ALTER TABLE</strong> command.</p>
<p><strong>NOTE:</strong> Some database management systems allow the use of the <strong>MODIFY</strong> Clause; others do not. Still others have added other clauses to the <strong>ALTER TABLE</strong> statement. In Oracle, you can even alter the table’s storage parameters. Check the documentation of the system you are using to determine the implementation of the <strong>ALTER TABLE</strong> statement.</p>
<p><strong>The DROP TABLE Statement</strong></p>
<p>SQL provides a command to completely remove a table from a database. The <strong>DROP TABLE</strong> command deletes a table along with all its associated views and indexes. After this command has been issued, there is no turning back. The most common use of the <strong>DROP TABLE</strong> statement is when you have created a table for temporary use. When you have completed all operations on the table that you planned to do, issue the <strong>DROP TABLE</strong> statement with the following syntax:</p>
<p><strong>SYNTAX:</strong></p>
<p>DROP TABLE table_name;</p>
<p>Here’s how to drop the <strong>NEW_BILLS</strong> table:</p>
<p><strong>INPUT/OUTPUT:</strong></p>
<p>SQL&gt; <strong>DROP TABLE NEW_BILLS;</strong></p>
<p>Table dropped.</p>
<p><strong>ANALYSIS:</strong></p>
<p>Notice the absence of system prompts. This command did not ask <strong>Are you sure? (Y/N)</strong>. After the <strong>DROP TABLE</strong> command is issued, the table is permanently deleted.</p>
<p><strong>WARNING:</strong> If you issue</p>
<p>SQL&gt; DROP TABLE NEW_BILLS;</p>
<p>you could be dropping the incorrect table. When dropping tables, you should always use the owner or schema name. The recommended syntax is</p>
<p>SQL&gt; DROP TABLE OWNER.NEW_BILLS;</p>
<p>We are stressing this syntax because we once had to repair a production database from which the wrong table had been dropped. The table was not properly identified with the schema name. Restoring the database was an eight-hour job, and we had to work until well past midnight.</p>
<p><strong>The DROP DATABASE Statement</strong></p>
<p>Some database management systems also provide the <strong>DROP DATABASE</strong> statement, which is identical in usage to the <strong>DROP TABLE</strong> statement. The syntax for this statement is as follows:</p>
<p>DROP DATABASE database_name</p>
<p><strong>NOTE:</strong> The various relational database implementations require you to take different steps to drop a database. After the database is dropped, you will need to clean up the operating system files that compose the database.</p>
<p><strong>Exercise 9.2</strong></p>
<p>Create a database with one table in it. Issue the <strong>DROP TABLE</strong> command and the issue the <strong>DROP DATABASE</strong> command. Does your database system allow you to do this? Single-file based systems, such as Microsoft Access, do not support this command. The database is contained in a single file. To create a database, you must use the menu options provided in the product itself. To delete a database, simply delete the file from the hard drive.</p>
<p><strong>Summary</strong></p>
<p>It covers the major features of SQL’s Data Manipulation Language (DML). In particular, you learned five new statements: <strong>CREATE DATABASE</strong>, <strong>CREATE TABLE</strong>, <strong>ALTER TABLE</strong>, <strong>DROP TABLE</strong>, and <strong>DROP DATABASE</strong>. It also discusses the importance of creating a good database design.</p>
<p>A data dictionary is one of the most important pieces of documentation you can create when designing a database. This dictionary should include a complete description of all objects in the database: tables, fields, views, indexes, stored procedures, triggers, and so forth. A complete data dictionary also contains a brief comment explaining the purpose behind each item in the database. You should update the data dictionary whenever you make changes to the database.</p>
<p>Before using any of the data manipulation statements, it is also important to create a good database design. Break down the required information into logical groups and try to identify a primary key field that other groups (or tables) can use to reference this logical group. Use foreign key fields to point to the primary or foreign key fields in other tables.</p>
<p>You learned that the <strong>CREATE DATABASE</strong> statement is not a standard element within database systems. This variation is primarily due to the many different ways vendors store their databases on disk. Each implementation enables a different set of features and options, which results in a completely different <strong>CREATE DATABASE</strong> statement. Simply issuing <strong>CREATE DATABASE database_name</strong> creates a default database with a default size on most systems. The <strong>DROP DATABASE</strong> statement permanently removes that database.</p>
<p>The <strong>CREATE TABLE</strong> statement creates a new table. With this command, you can create the fields you need and identify their data types. Some database management systems also allow you to specify other attributes for the field, such as whether it can allow <strong>NULL</strong> values or whether that field should be unique throughout the table. The <strong>ALTER TABLE</strong> statement can alter the structure of an existing table. The <strong>DROP TABLE</strong> statement can delete a table from a database.</p>
<p><strong>Q&amp;A</strong></p>
<p><strong>Q Why does the</strong> <strong>CREATE DATABASE</strong> <strong>statement vary so much from one system to another?</strong></p>
<p><strong>A</strong> <strong>CREATE DATABASE</strong> varies because the actual process of creating a database varies from one database system to another. Small PC-based databases usually rely on files that are created within some type of application program. To distribute the database on a large server, related database files are simply distributed over several disk drives. When your code accesses these databases, there is no database process running on the computer, just your application accessing the files directly. More powerful database systems must take into account disk space management as well as support features such as security, transaction control, and stored procedures embedded within the database itself. When your application program accesses a database, a database server manages your requests (along with many others’ requests) and returns data to you through a sometimes complex layer of middleware.</p>
<p><strong>Q Can I create a table temporarily and then automatically drop it when I am done with it?</strong></p>
<p><strong>A</strong> Yes. Many database management systems support the concept of a temporary table. This type of table is created for temporary usage and is automatically deleted when your user’s process ends or when you issue the <strong>DROP TABLE</strong> command.</p>
<p><strong>Q Can I remove columns with the</strong> <strong>ALTER TABLE</strong> <strong>statement?</strong></p>
<p><strong>A</strong> No. The <strong>ALTER TABLE</strong> command can be used only to add or modify columns within a table. To remove columns, create a new table with the desired format and then select the records from the old table into the new table.</p>
]]></content>
      <categories>
        <category>SQL</category>
      </categories>
      <tags>
        <tag>Web</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>网鼎杯青龙组初赛复现Writeup</title>
    <url>/2022/09/01/%E7%BD%91%E9%BC%8E%E6%9D%AF%E9%9D%92%E9%BE%99%E7%BB%84%E5%88%9D%E8%B5%9B%E5%A4%8D%E7%8E%B0Writeup/</url>
    <content><![CDATA[<p>​    这场比赛，在赛中及其坐牢，自己一直学的Web没派上什么用场，还是积蓄不够，倒是密码很有意思，赛后主要复现Crypto去了。qwq</p>
<span id="more"></span>
<h1 id="crypto"><a class="markdownIt-Anchor" href="#crypto"></a> Crypto</h1>
<h2 id="crypto091"><a class="markdownIt-Anchor" href="#crypto091"></a> crypto091</h2>
<p>根据题意，猜测一波sha256，上脚本爆破，赛后有好友说可以用hashcat，自己没弄出来，还是安心写脚本。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> sha256</span><br><span class="line"><span class="built_in">hash</span> = <span class="string">&#x27;c22a563acc2a587afbfaaaa6d67bc6e628872b00bd7e998873881f7c6fdc62fc&#x27;</span></span><br><span class="line">m = <span class="string">&#x27;86170&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>*<span class="number">8</span>)://<span class="number">0</span>-<span class="number">9</span>十位数填充八位，所以循环<span class="number">10</span>*<span class="number">8</span>次</span><br><span class="line">    phone_number = m + <span class="built_in">str</span>(i).zfill(<span class="number">8</span>)//匹配爆破的数</span><br><span class="line">    <span class="keyword">if</span> sha256(phone_number.encode()).hexdigest() == <span class="built_in">hash</span>:</span><br><span class="line">        //匹配填充后的电话号码<span class="built_in">hash</span>值</span><br><span class="line">        <span class="built_in">print</span>(phone_number)</span><br><span class="line">‘‘‘</span><br><span class="line"><span class="number">8617091733716</span></span><br><span class="line">’’’</span><br></pre></td></tr></table></figure>
<h2 id="crypto405"><a class="markdownIt-Anchor" href="#crypto405"></a> crypto405</h2>
<p>先看题目给的out.txt</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Grasshopper#00:2066</span><br><span class="line">Grasshopper#01:a222</span><br><span class="line">Grasshopper#02:cbb1</span><br><span class="line">Grasshopper#03:dbb4</span><br><span class="line">Grasshopper#04:deb4</span><br><span class="line">Grasshopper#05:b1c5</span><br><span class="line">Grasshopper#06:33a4</span><br><span class="line">Grasshopper#07:c051</span><br><span class="line">Grasshopper#08:3b79</span><br><span class="line">Grasshopper#09:6bf8</span><br><span class="line">Grasshopper#10:2131</span><br><span class="line">Grasshopper#11:2c40</span><br><span class="line">Grasshopper#12:91ba</span><br><span class="line">Grasshopper#13:7b44</span><br><span class="line">Grasshopper#14:5f25</span><br><span class="line">Grasshopper#15:0208</span><br><span class="line">Grasshopper#16:7edb</span><br><span class="line">Grasshopper#17:62b5</span><br><span class="line">Grasshopper#18:cec5</span><br><span class="line">Grasshopper#19:5ab3</span><br><span class="line">Grasshopper#20:3c46</span><br><span class="line">Grasshopper#21:c272</span><br><span class="line">Grasshopper#22:714b</span><br><span class="line">Grasshopper#23:9e0b</span><br><span class="line">Grasshopper#24:48ee</span><br><span class="line">Grasshopper#25:44cc</span><br><span class="line">Grasshopper#26:05a0</span><br><span class="line">Grasshopper#27:3da3</span><br><span class="line">Grasshopper#28:11b1</span><br><span class="line">Grasshopper#29:259f</span><br><span class="line">Grasshopper#30:899d</span><br><span class="line">Grasshopper#31:a130</span><br><span class="line">Grasshopper#32:e58f</span><br><span class="line">Grasshopper#33:23f3</span><br><span class="line">Grasshopper#34:5829</span><br><span class="line">Grasshopper#35:6beb</span><br><span class="line">Grasshopper#36:3681</span><br><span class="line">Grasshopper#37:0054</span><br><span class="line">Grasshopper#38:a189</span><br><span class="line">Grasshopper#39:2765</span><br><span class="line">Grasshopper#40:c63d</span><br><span class="line">Grasshopper#41:bc68</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>赛事Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Crypto</tag>
      </tags>
  </entry>
  <entry>
    <title>Dest0g3 520迎新赛</title>
    <url>/2022/08/25/Dest0g3-520%E8%BF%8E%E6%96%B0%E8%B5%9B/</url>
    <content><![CDATA[<h1 id="dest0g3-520迎新赛"><a class="markdownIt-Anchor" href="#dest0g3-520迎新赛"></a> Dest0g3 520迎新赛</h1>
<p>Dest0g3首次招新啦！</p>
<p>Dest0g3 Team现逐步发展到各大高校及安全公司均有成员分布，在过去的半年里先后取得L3HCTF第十、SCTF第六及SUSCTF第四的优异成绩。</p>
<p>首届Dest0g3 520迎新赛更加注重CTFer的基础知识面掌握程度，由易到难，适合各学习阶段选手参加，纯萌新水准。</p>
<p>Dest0g3期待更多新生力量的加入，如有意向请在赛后提交wp与简历，或联系@Dest0g3 Team （QQ：1115230222）</p>
<p>比赛时间：2022.5.20 10:00 - 5.27 10:00</p>
<p>题目分类：Web、Pwn、Misc、Crypto、Re、AI、BlockChain</p>
<p>题目难度：萌新</p>
<p>比赛类型：个人赛</p>
<p>比赛交流QQ群：923945203</p>
<p>个人赛奖励：总榜前10及各方向前三均可获得《从0到1：CTFer成长之路》一本 + 定制U盘（32G）一个</p>
<span id="more"></span>
<h2 id="misc"><a class="markdownIt-Anchor" href="#misc"></a> Misc</h2>
<h3 id="welcome-to-fxxking-destctf"><a class="markdownIt-Anchor" href="#welcome-to-fxxking-destctf"></a> Welcome to fxxking DestCTF</h3>
<p>**题目描述：**关注公众号并回复：Give me the fxxking flag</p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/8fc59c32ce5bcf7da3917ad4a3a023ba/jpg">https://files.buuoj.cn/files/8fc59c32ce5bcf7da3917ad4a3a023ba/jpg</a></p>
<p><strong>做题过程：</strong></p>
<p>将附件拖入浏览器查看。获得二维码，扫码关注公众号，输入提示给的：Give me the fxxking flag</p>
<p><img src="https://img-blog.csdnimg.cn/c2001876496f4c2292e236787d6a1064.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>获取flag：Dest0g3{W31c0m3_t0_DestCTF2022!}</p>
<h3 id="pngenius"><a class="markdownIt-Anchor" href="#pngenius"></a> Pngenius</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/5a64d4c2532f28b79aa99089c3f76ff5/Dest0g3.png">https://files.buuoj.cn/files/5a64d4c2532f28b79aa99089c3f76ff5/Dest0g3.png</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、获取图片是PNG格式，首先想到的就是LSB隐写，使用工具stegslove查看</p>
<p>在r 0 g 0 b 0处发现有变化。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/359af78c6f5a4c589951a0fb06d41b4f.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"><img src="https://img-blog.csdnimg.cn/86ffb3a2a628455bbc8753c9aae546c4.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"><img src="https://img-blog.csdnimg.cn/56a9f5ded36347ce90a55fc14aa8cbc5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>2、使用stegslove自带的Data Extract 数据提取工具对三处异常，进行查看。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/321e9f64811e4ff9b9a7173a133de680.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"><img src="https://img-blog.csdnimg.cn/bbb2325b1ca949c78345c512a80b0baf.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>3、 得到一个压缩包的解压密码，返回图片，使用binwalk进行扫描，并提取压缩包</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2c43f5298f2944ff9db941fc40514f10.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>4、输入压缩包密码Weak_Pas5w0rd，打开压缩包，获取flag.txt。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/c0beb361c71f491cb15e387b11233fab.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>获取flag：Dest0g3{2908C1AA-B2C1-B8E6-89D1-21B97D778603}</p>
<h3 id="easyencode"><a class="markdownIt-Anchor" href="#easyencode"></a> EasyEncode</h3>
<p>**题目描述：**Enjoy Decoding</p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/2fb77a72cba82a4c9a749998a1073e58/encode.zip">https://files.buuoj.cn/files/2fb77a72cba82a4c9a749998a1073e58/encode.zip</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>下载附件，是个ZIP文件，解压，发现有加密，丢进010 edtier中查看</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/9366225f80f442268e5d39bc432269e6.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>2、发现不是伪加密，于是试着用ARCHPR爆破一下，密码长度选择4-6位。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/014592d521754099affcc8d040053bb5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获得密码100861，解压压缩包,打开文本文件，发现摩斯编码：</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/69d19aa758f54c6ca6765360a63ef07e.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>3、下面就是解码过程：</p>
</blockquote>
<blockquote>
<p>运用在线工具<a href="https://www.lddgo.net/encrypt/morse">在线摩斯密码翻译器 (lddgo.net)</a></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/7cb0a08d95c84f52a15831cb7f247b5b.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获得一串Hex（十六进制）编码，运用在线工具<a href="https://the-x.cn/encodings/Hex.aspx">HEX转字符 十六进制转字符 hex gb2312 gbk utf8 汉字内码转换 - The X 在线工具 (the-x.cn)</a>转字符：</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/2051da8075304abcae5cca6dbdc2ddae.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获得一串unicode编码，使用在线工具<a href="https://tool.chinaz.com/tools/unicode.aspx">Unicode编码转换 - 站长工具 (chinaz.com)</a></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/484a9cb95ec9408d9ad2905d7b59f600.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>“%3D”在url编码中是“=”’，所以进行base64解码，运用在线工具：<a href="https://the-x.cn/zh-cn/base64">Base64解码 Base64编码 UTF8 GB2312 UTF16 GBK 二进制 十六进制 解密 - The X 在线工具 (the-x.cn)</a></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/da9e343502734ca89a6f8cd6baf55939.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>获得flag：Dest0g3{Deoding_1s_e4sy_4_U}</p>
<h3 id="你知道js吗"><a class="markdownIt-Anchor" href="#你知道js吗"></a> 你知道js吗</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/5f1fc294b6468f733b774ceee6106062/flag">https://files.buuoj.cn/files/5f1fc294b6468f733b774ceee6106062/flag</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、下载，附件，懒了，不想开010，直接吧附件扔到浏览器，浏览器自动编译后下载了一个flag.zip文件</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/ffa9b6c56dc641e0b5db406f890eb691.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>2、打开压缩包，看到一堆XML格式的文件，直接扔浏览器里。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/fe2bbcc56eea4328b710beee5cdfb457.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>在docoment.xml中发现三串base64特征字符，拼接解码后获得</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> standalone=<span class="string">&quot;yes&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:schemas-microsoft-com:asm.v1&quot;</span> <span class="attr">manifestVersion</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">trustInfo</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:schemas-microsoft-com:asm.v3&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">requestedExecutionLevel</span> <span class="attr">level</span>=<span class="string">&quot;asInvoker&quot;</span> <span class="attr">uiAccess</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">application</span> <span class="attr">xmlns</span>=<span class="string">&quot;urn:schemas-microsoft-com:asm.v3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dpiAwareness</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://schemas.microsoft.com/SMI/2016/WindowsSettings&quot;</span>&gt;</span>Do you know js<span class="tag">&lt;/<span class="name">dpiAwareness</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="built_in">unescape</span>(<span class="string">&#x27;%3Chtml%3E%0A%3Cbody%3E%0A%0A%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3EDo%20You%20Know%20js%3C%2Ftitle%3E%0A%3CHTA%3AAPPLICATION%0A%20%20APPLICATIONNAME%3D%22Do%20You%20Know%20js%22%0A%20%20ID%3D%22Inception%22%0A%20%20VERSION%3D%221.0%22%0A%20%20SCROLL%3D%22no%22%2F%3E%0A%20%0A%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%3C%2Fhead%3E%0A%20%20%20%20%3Cdiv%20id%3D%22feature%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22content%0A%09%09%09%09%3C%2Fstyle%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%20id%3D%22unavailable%22%20class%3D%22loading%22%3EBuilding%20js.....%3C%2Fh1%3E%0A%09%09%09%09%3Cscript%20type%3D%22text%2Fjavascript%22%20language%3D%22javascript%22%3E%0A%09%09%09%09%09function%20RunFile%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20WshShell%20%3D%20new%20ActiveXObject%28%22WScript.Shell%22%29%3B%0A%09%09%09%09%09WshShell.Run%28%22notepad%20%25windir%25%2FDesktop%2Fjs.txt%22%2C%201%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%2F*%20var%20oExec%20%3D%20WshShell.Exec%28%22notepad%22%29%3B%20*%2F%0A%09%09%09%09%09%7D%0A%09%09%09%09%3C%2Fscript%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%3Cbody%3E%0A%09%3Cinput%20type%3D%22button%22%20value%3D%22Implant%20Inception%20Here%22%20onclick%3D%22RunFile%28%29%3B%22%2F%3E%0A%09%3Cp%20style%3D%22color%3Awhite%3B%22%3E%0A%0A%2B%2B%2B%2B%2B%20%2B%2B%5B-%3E%20%2B%2B%2B%2B%2B%20%2B%2B%3C%5D%3E%20%2B%2B%2B..%20%2B%2B.-.%20%2B%2B.--%20--.%2B%2B%20%2B%2B.--%20%0A-.-.-%20--.%2B%2B%20%2B%2B%2B%2B.%0A%2B.---%20-..%2B%2B%20%2B%2B.%3C%2B%20%2B%2B%5B-%3E%20%2B%2B%2B%3C%5D%20%3E%2B%2B.%3C%20%2B%2B%2B%5B-%20%0A%3E---%3C%20%5D%3E---%20---.%2B%20%2B%2B%2B%2B.%20-----%0A.%2B%2B%2B.%20...--%20---.%2B%20%2B%2B%2B%2B.%20---.%2B%20%2B%2B.--%20---.%2B%20%2B%2B%2B%2B.%20---..%20%2B%2B%2B%2B%2B%20%2B.---%20----.%0A%3C%2B%2B%2B%2B%20%5B-%3E%2B%2B%20%2B%2B%3C%5D%3E%20%2B%2B.%3C%2B%20%2B%2B%2B%5B-%20%3E----%20%3C%5D%3E-.%20---.%2B%0A%20%2B%2B%2B%2B%2B%20.----%20-.%2B%2B.%20%2B%2B.%2B.%0A--.--%20.%3C%2B%2B%2B%20%2B%5B-%3E%2B%20%2B%2B%2B%3C%5D%20%3E%2B%2B.%3C%20%2B%2B%2B%2B%5B%20-%3E---%20-%3C%5D%3E-%20%0A.%2B.-.%20---.%2B%20%2B%2B.%2B.%20-.%2B%2B%2B%0A%2B.---%20--.%3C%2B%20%2B%2B%2B%5B-%20%3E%2B%2B%2B%2B%20%3C%5D%3E%2B%2B%20.%3C%2B%2B%2B%20%5B-%3E--%20-%3C%5D%3E-%20----.%20----.%20%2B.%2B%2B%2B%20%2B.---%0A-.---%20.%2B%2B%2B.%20-..%3C%2B%20%2B%2B%2B%5B-%20%3E%2B%2B%2B%2B%20%3C%5D%3E%2B%2B%20%0A.%3C%2B%2B%2B%20%2B%5B-%3E-%20---%3C%5D%20%3E-.%2B%2B%20%2B%2B%2B.-%20----.%0A%2B%2B%2B..%20---.%2B%20%2B%2B.--%20--.%2B.%20..%2B%2B%2B%20%2B.-.-%20----.%20%2B%2B%2B%2B%2B%20%0A.----%20.%2B.%2B%2B%20%2B%2B.--%20--.%2B%2B%0A%2B%2B.-.%20----.%20%2B.-.%2B%20%2B%2B%2B%2B.%20%0A%3C%2B%2B%2B%5B%20-%3E%2B%2B%2B%20%3C%5D%3E%2B%2B%20%2B%2B.%3C%0A%3C%2Fp%3E%0A%3C%2Fbody%3E%0A%3C%2Fbody%3E%0A%20%20%3C%2Fhtml%3E%0A&#x27;</span>));</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>辨别解码后是，url编码，在线工具解码<a href="https://the-x.cn/zh-cn/UrlDecode.aspx">UrlDecode解码/UrlEncode编码 GB2312 UTF8 - The X 在线工具 (the-x.cn)</a>：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Do You Know js<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">HTA:APPLICATION</span></span></span><br><span class="line"><span class="tag">  <span class="attr">APPLICATIONNAME</span>=<span class="string">&quot;Do You Know js&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">ID</span>=<span class="string">&quot;Inception&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">VERSION</span>=<span class="string">&quot;1.0&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">SCROLL</span>=<span class="string">&quot;no&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;feature&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">				</span></span></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;unavailable&quot;</span> <span class="attr">class</span>=<span class="string">&quot;loading&quot;</span>&gt;</span>Building js.....<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">language</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">function</span> <span class="title function_">RunFile</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> <span class="title class_">WshShell</span> = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>(<span class="string">&quot;WScript.Shell&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="title class_">WshShell</span>.<span class="title class_">Run</span>(<span class="string">&quot;notepad %windir%/Desktop/js.txt&quot;</span>, <span class="number">1</span>, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">/* var oExec = WshShell.Exec(&quot;notepad&quot;); */</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Implant Inception Here&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;RunFile();&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color:white;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">+++++ ++[-&gt; +++++ ++&lt;]&gt; +++.. ++.-. ++.-- --.++ ++.-- </span><br><span class="line">-.-.- --.++ ++++.</span><br><span class="line">+.--- -..++ ++.&lt;+ ++[-&gt; +++&lt;] &gt;++.&lt; +++[- </span><br><span class="line">&gt;---&lt; ]&gt;--- ---.+ ++++. -----</span><br><span class="line">.+++. ...-- ---.+ ++++. ---.+ ++.-- ---.+ ++++. ---.. +++++ +.--- ----.</span><br><span class="line">&lt;++++ [-&gt;++ ++&lt;]&gt; ++.&lt;+ +++[- &gt;---- &lt;]&gt;-. ---.+</span><br><span class="line"> +++++ .---- -.++. ++.+.</span><br><span class="line">--.-- .&lt;+++ +[-&gt;+ +++&lt;] &gt;++.&lt; ++++[ -&gt;--- -&lt;]&gt;- </span><br><span class="line">.+.-. ---.+ ++.+. -.+++</span><br><span class="line">+.--- --.&lt;+ +++[- &gt;++++ &lt;]&gt;++ .&lt;+++ [-&gt;-- -&lt;]&gt;- ----. ----. +.+++ +.---</span><br><span class="line">-.--- .+++. -..&lt;+ +++[- &gt;++++ &lt;]&gt;++ </span><br><span class="line">.&lt;+++ +[-&gt;- ---&lt;] &gt;-.++ +++.- ----.</span><br><span class="line">+++.. ---.+ ++.-- --.+. ..+++ +.-.- ----. +++++ </span><br><span class="line">.---- .+.++ ++.-- --.++</span><br><span class="line">++.-. ----. +.-.+ ++++. </span><br><span class="line">&lt;+++[ -&gt;+++ &lt;]&gt;++ ++.&lt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&#x27;));<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>辨别是Brainfuck/Ook!编码，使用在线工具解码：[Brainfuck/Ook! Obfuscation/Encoding <a href="https://www.splitbrain.org/services/ook">splitbrain.org]</a></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/0c0c85c1672f49479a6dc2be0e5ddf94.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>解出获得：</p>
<p>446573743067337B38366661636163392D306135642D343034372D623730322D3836636233376162373762327D</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/f73ae5e6532e4414b16ffc0539177ed6.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>接着Hex转文字就可以，使用在线工具<a href="https://the-x.cn/zh-cn/encodings/Hex.aspx">HEX转字符 十六进制转字符 hex gb2312 gbk utf8 汉字内码转换 - The X 在线工具 (the-x.cn)</a></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/0670b90edc9a407f9a1457e45eed2fbc.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p>获取flag：Dest0g3{86facac9-0a5d-4047-b702-86cb37ab77b2}</p>
<h3 id="strangetraffic"><a class="markdownIt-Anchor" href="#strangetraffic"></a> StrangeTraffic</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/c329bafcc0113003c060d62f8f99b2e7/StrangeTraffic.pcapng">https://files.buuoj.cn/files/c329bafcc0113003c060d62f8f99b2e7/StrangeTraffic.pcapng</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、下载附件，虚拟机kali打开文件，wireshark分析，可以看出是mudbus工控流量。追踪TCP流，在流0处看到可疑的东西，将展现形式改为Hex转储</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/40498cc937884428b33e0efc49584871.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>2、在尾部存在base64特征编码，手动提取：</p>
<p>RGVzdDBnM3szMUE1QkVBNi1GMjBELUYxOEEtRThFQS0yOUI0RjI1NzEwOEJ9</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/7a35322cfd9a4b458cbe866587f2454d.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="https://img-blog.csdnimg.cn/cf147a5e73dd449d98750098326703bd.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获取flag：Dest0g3{31A5BEA6-F20D-F18A-E8EA-29B4F257108B}</p>
</blockquote>
<h3 id="easyword"><a class="markdownIt-Anchor" href="#easyword"></a> EasyWord</h3>
<p>**题目描述：**Let the word tell u</p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/aae5e40774fcd4089557007b1b030f41/EasyWord.zip">https://files.buuoj.cn/files/aae5e40774fcd4089557007b1b030f41/EasyWord.zip</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>下载附件，打开压缩包，得到一个加密的docm文件，hint提示说六位小写字母加密，并给出了第三位和第五位，于是考虑用工具AOPRT:</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/d4f37e4627004af2911f0a31afd5f141.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>爆破了好几次，结果都不对，别放弃使用该方法。</p>
</blockquote>
<h2 id="web"><a class="markdownIt-Anchor" href="#web"></a> Web</h2>
<h3 id="phpdest"><a class="markdownIt-Anchor" href="#phpdest"></a> phpdest</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="http://d10eb908-5734-4807-9b12-493d578d495c.node4.buuoj.cn:81/">http://d10eb908-5734-4807-9b12-493d578d495c.node4.buuoj.cn:81/</a>(环境在Buuctf一直都有，可以自行打开）</p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、点开链接，获得解密源码，第一时间想到的是文件包含，堆叠注入。构建payload试一下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?file=php:<span class="comment">//filter/read=convert.base64-encode/resource=flag.php</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/15c694e4a91444b9bc0cce7ce6334798.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>没有回显，对php代码审计，发现 require_once函数，发现干货了</p>
</blockquote>
<blockquote>
<p>require_once() 语句在脚本执行期间包括并运行指定文件。此<a href="http://www.php.cn/php/php-tp-behavior.html">行为</a>和 require() 语句类似，唯一区别是如果该文件中的代码已经被包括了，则不会再次包括。</p>
<p>PHP最新版的小Trick,require_once包含的软链接层数较多时once的hash匹配会直接失效造成重复包含</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/proc/[pid]`记录了系统运行的信息状态，而`/proc/self`指的是当前进程(自身进程)的pid，就类似于类里面的`this</span><br></pre></td></tr></table></figure>
<p><code>/proc/self/root/</code>是指向<code>/</code>的符号链接</p>
</blockquote>
<blockquote>
<p>构造payload</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">?file=php:<span class="comment">//filter/read=convert.base64-encode/resource/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/proc/self/root/var/www/html/flag.php</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/3af4fa34b35446609646329ab107b20c.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获得flag.php的源码，base64解码获得flag：</p>
<p>Dest0g3{f05260c1-70e9-481b-89b1-eb397377f621}</p>
</blockquote>
<h3 id="easyphp"><a class="markdownIt-Anchor" href="#easyphp"></a> EasyPHP</h3>
<p>**题目描述：**Post something</p>
<p><strong>附件下载：</strong><a href="http://d7cb2110-b7b2-4ff0-9ce7-a5788de17012.node4.buuoj.cn:81/">d7cb2110-b7b2-4ff0-9ce7-a5788de17012.node4.buuoj.cn:81</a>(环境在Buuctf一直都有，可以自行打开）</p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、点开链接，获取界面：</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/e36c7a302fd44ad392077cd7e4e91506.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>2、没啥干的，直接代码审计</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);<span class="comment">//高亮显示，没啥用</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;fl4g.php&quot;</span>;<span class="comment">//读取fl4g.php文件</span></span><br><span class="line"><span class="variable">$dest0g3</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;ctf&#x27;</span>];<span class="comment">//对dest0g3传入参数‘ctf’</span></span><br><span class="line"><span class="variable">$time</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;H&quot;</span>);<span class="comment">//对时间的限制，下同</span></span><br><span class="line"><span class="variable">$timme</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"><span class="variable">$timmme</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;i&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>((<span class="variable">$time</span> &gt; <span class="string">&quot;24&quot;</span>) <span class="keyword">or</span> (<span class="variable">$timme</span> &gt; <span class="string">&quot;31&quot;</span>) <span class="keyword">or</span> (<span class="variable">$timmme</span> &gt; <span class="string">&quot;60&quot;</span>))&#123;<span class="comment">//如果时间为假，则输出fl4g，反之输出&quot;Try harder!&quot;,很显然时间不可能为假。</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$fl4g</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Try harder!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">set_error_handler</span>(//看到这个函数，就有解了后有详解，既对传入参数进行比对，只要让他运行错误就行。</span><br><span class="line">    function() <span class="keyword">use</span>(&amp;$<span class="title">fl4g</span>) &#123;</span><br><span class="line">        <span class="title">print</span> $<span class="title">fl4g</span>;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"><span class="variable">$fl4g</span> .= <span class="variable">$dest0g3</span>;</span><br><span class="line"><span class="meta">?&gt;</span> Try harder!</span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>干货：set_error_handler () 函数<strong>设置用户自定义的错误处理函数</strong>。. 该函数用于创建运行时期间的用户自己的错误处理方法。. 该函数会返回旧的错误处理程序，若失败，则返回 null。</p>
</blockquote>
<blockquote>
<p>3、构建数组报错POST：ctf[]=1</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/dff3286ffba6434fac7bb6c3a38f6ec5.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<blockquote>
<p>获取flag：Dest0g3{a57b8d1d-da8f-42ee-a782-3a92bc372ec3}</p>
</blockquote>
<h2 id="crypto"><a class="markdownIt-Anchor" href="#crypto"></a> Crypto</h2>
<h3 id="babyrsa"><a class="markdownIt-Anchor" href="#babyrsa"></a> babyRSA</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/28e6d9906de54ebfdc565f9ef541bcbf/task.py">https://files.buuoj.cn/files/28e6d9906de54ebfdc565f9ef541bcbf/task.py</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、打开附件，fofa分解n，常规解。上脚本，获取flag。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> libnum</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> long_to_bytes</span><br><span class="line"></span><br><span class="line">c = <span class="number">14181751948841206148995320731138166924841307246014981115736748934451763670304308496261846056687977917728671991049712129745906089287169170294259856601300717330153987080212591008738712344004443623518040786009771108879196701679833782022875324499201475522241396314392429412747392203809125245393462952461525539673218721341853515099201642769577031724762640317081252046606564108211626446676911167979492329012381654087618979631924439276786566078856385835786995011067720124277812004808431347148593882791476391944410064371926611180496847010107167486521927340045188960373155894717498700488982910217850877130989318706580155251854</span></span><br><span class="line">n = <span class="number">27272410937497615429184017335437367466288981498585803398561456300019447702001403165885200936510173980380489828828523983388730026101865884520679872671569532101708469344562155718974222196684544003071765625134489632331414011555536130289106822732544904502428727133498239161324625698270381715640332111381465813621908465311076678337695819124178638737015840941223342176563458181918865641701282965455705790456658431641632470787689389714643528968037519265144919465402561959014798324908010947632834281698638848683632113623788303921939908168450492197671761167009855312820364427648296494571794298105543758141065915257674305081267</span></span><br><span class="line">e = <span class="number">65537</span></span><br><span class="line">q = <span class="number">165143607013706756535226162768509114446233024193609895145003307138652758365886458917899911435630452642271040480670481691733000313754732183700991227511971005378010205097929462099354944574007393761811271098947894183507596772524174007304430976545608980195888302421142266401500880413925699125132100053801973969401</span></span><br><span class="line">p = <span class="number">165143607013706756535226162768509114446233024193609895145003307138652758365886458917899911435630452642271040480670481691733000313754732183700991227511971005378010205097929462099354944574007393761811271098947894183507596772524174007304430976545608980195888302421142266401500880413925699125132100053801973971467</span></span><br><span class="line"></span><br><span class="line">d = libnum.invmod(e, (p - <span class="number">1</span>) * (q - <span class="number">1</span>))</span><br><span class="line">m = <span class="built_in">pow</span>(c, d, n)  <span class="comment"># m 的十进制形式</span></span><br><span class="line">string = long_to_bytes(m)  <span class="comment"># m明文</span></span><br><span class="line"><span class="built_in">print</span>(string)  <span class="comment"># 结果为 b‘ m ’ 的形式</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#b&#x27;Dest0g3&#123;96411aad-032c-20a8-bc43-b473f6f08536&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h3 id="babyaes"><a class="markdownIt-Anchor" href="#babyaes"></a> babyAES</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/ded8ebffd78bc71ff21b41701727c875/task.py">https://files.buuoj.cn/files/ded8ebffd78bc71ff21b41701727c875/task.py</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、打开附件，AES常规解。上脚本。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"></span><br><span class="line">iv = <span class="string">b&#x27;\xd1\xdf\x8f)\x08w\xde\xf9yX%\xca[\xcb\x18\x80&#x27;</span></span><br><span class="line">key = <span class="string">b&#x27;\xa4\xa6M\xab&#123;\xf6\x97\x94&gt;hK\x9bBe]F&#x27;</span></span><br><span class="line">my_aes = AES.new(key, AES.MODE_CBC, iv)</span><br><span class="line">c = <span class="string">b&#x27;C4:\x86Q$\xb0\xd1\x1b\xa9L\x00\xad\xa3\xff\x96 hJ\x1b~\x1c\xd1y\x87A\xfe0\xe2\xfb\xc7\xb7\x7f^\xc8\x9aP\xdaX\xc6\xdf\x17l=K\x95\xd07&#x27;</span></span><br><span class="line">flag = my_aes.decrypt(c)</span><br><span class="line"><span class="built_in">print</span>(flag)</span><br><span class="line"></span><br><span class="line"><span class="comment">#b&#x27;Dest0g3&#123;d0e5fa76-e50f-76f6-9cf1-b6c2d576b6f4&#125;\x00\x00\x00&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
</blockquote>
<h3 id="ezdlp"><a class="markdownIt-Anchor" href="#ezdlp"></a> ezDLP</h3>
<p><strong>题目描述：</strong></p>
<p>**附件下载：**<a href="https://files.buuoj.cn/files/67d5c3e2b9ac73c8ebf66665b077e33f/task.py">https://files.buuoj.cn/files/67d5c3e2b9ac73c8ebf66665b077e33f/task.py</a></p>
<p><strong>做题过程：</strong></p>
<blockquote>
<p>1、点开附件，尝试用Pohlig-Hellman 算法的方法，进行解密，但是想不通，就去搜了一下对pow（）逆运算，发现sage有相应的函数，写解密脚本，放到sagemath（<a href="https://sagecell.sagemath.org/">Sage Cell Server (sagemath.org)</a>）中运行。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Sage</span></span><br><span class="line">g = <span class="number">19</span></span><br><span class="line">p = <span class="number">335215034881592512312398694238485179340610060759881511231472142277527176340784432381542726029524727833039074808456839870641607412102746854257629226877248337002993023452385472058106944014653401647033456174126976474875859099023703472904735779212010820524934972736276889281087909166017427905825553503050645575935980580803899122224368875197728677516907272452047278523846912786938173456942568602502013001099009776563388736434564541041529106817380347284002060811645842312648498340150736573246893588079033524476111268686138924892091575797329915240849862827621736832883215569687974368499436632617425922744658912248644475097139485785819369867604176912652851123185884810544172785948158330991257118563772736929105360124222843930130347670027236797458715653361366862282591170630650344062377644570729478796795124594909835004189813214758026703689710017334501371279295621820181402191463184275851324378938021156631501330660825566054528793444353</span></span><br><span class="line">h = <span class="number">199533304296625406955683944856330940256037859126142372412254741689676902594083385071807594584589647225039650850524873289407540031812171301348304158895770989218721006018956756841251888659321582420167478909768740235321161096806581684857660007735707550914742749524818990843357217489433410647994417860374972468061110200554531819987204852047401539211300639165417994955609002932104372266583569468915607415521035920169948704261625320990186754910551780290421057403512785617970138903967874651050299914974180360347163879160470918945383706463326470519550909277678697788304151342226439850677611170439191913555562326538607106089620201074331099713506536192957054173076913374098400489398228161089007898192779738439912595619813699711049380213926849110877231503068464392648816891183318112570732792516076618174144968844351282497993164926346337121313644001762196098432060141494704659769545012678386821212213326455045335220435963683095439867976162</span></span><br><span class="line">d=discrete_log(h,mod(g,p))</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment">#627467212751652661100750674849894892358409405070345081253130721039787502632741519936253501608002590652971133</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#接着在本地环境运行以下代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> libnum <span class="keyword">import</span> n2s</span><br><span class="line"><span class="built_in">print</span>(n2s(<span class="number">627467212751652661100750674849894892358409405070345081253130721039787502632741519936253501608002590652971133</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#Dest0g3&#123;07ed2a6f-182f-a05d-c81e-1318af820a78&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>赛事Writeup</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Crypto</tag>
        <tag>Web</tag>
        <tag>Misc</tag>
      </tags>
  </entry>
  <entry>
    <title>HWS-Crypto</title>
    <url>/2022/08/25/HWS-Crypto/</url>
    <content><![CDATA[<p>这场比赛诶，参加的莫名其妙的，还没来得及复现，就做出来一个Crypto。qwq</p>
<span id="more"></span>
<h3 id="crypto"><a class="markdownIt-Anchor" href="#crypto"></a> Crypto</h3>
<h4 id="hws-easyrsa"><a class="markdownIt-Anchor" href="#hws-easyrsa"></a> HWS-easyRSA</h4>
<h5 id="解题过程"><a class="markdownIt-Anchor" href="#解题过程"></a> 解题过程：</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">m = <span class="number">31893593182018727625473530765941216190921866039118147474754069955393226712079257707838327486268599271803</span></span><br><span class="line">seed0 = <span class="number">25820280412859586557218124484272275594433027771091486422152141535682739897353623931875432576083022273940</span></span><br><span class="line">seed1 = <span class="number">24295465524789348024814588142969609603624462580932512051939198335014954252359986260009296537423802567677</span></span><br><span class="line">seed2 = <span class="number">14963686422550871447791815183480974143372785034397446416396172429864269108509521776424254168481536292904</span></span><br><span class="line"></span><br><span class="line">a = (seed2 - seed1) * gmpy2.invert(seed1 - seed0, m) % m</span><br><span class="line">b = (seed1 - a * seed0) % m</span><br><span class="line"></span><br><span class="line">MMI = <span class="keyword">lambda</span> A, m, s=<span class="number">1</span>, t=<span class="number">0</span>, N=<span class="number">0</span>: (m &lt; <span class="number">2</span> <span class="keyword">and</span> t % N <span class="keyword">or</span> MMI(m, A % m, t, s - A // m * t, N <span class="keyword">or</span> m), -<span class="number">1</span>)[m &lt; <span class="number">1</span>]  <span class="comment"># 逆元计算</span></span><br><span class="line">ani = MMI(a, m)</span><br><span class="line">seed = seed2</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    seed = (ani * (seed - b)) % m</span><br><span class="line"><span class="built_in">print</span>(long_to_bytes(seed))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>赛事Writeup</category>
      </categories>
      <tags>
        <tag>Crypto</tag>
      </tags>
  </entry>
</search>
